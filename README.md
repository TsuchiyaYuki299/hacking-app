# 🛡️ わくわくハッキング！

ハッキング（SQLインジェクション）の仕組みを体験し、セキュリティの重要性を学ぶためのWebアプリケーションです。
見た目は「ハッカーのターミナル」をイメージしたコンソール風デザインに仕上げました。

## 🔗 デモサイト
実際に動くアプリはこちらからアクセスできます：
**https://hacking-app-417115033292.asia-northeast1.run.app/**

## 🎮 遊び方（ハッキング手順）

このサイトは、通常のログイン認証を行っていますが、**意図的に脆弱性（セキュリティの穴）を作っています。**
以下の手順で、パスワードを知らなくても管理者として侵入してみてください。

1. **USER** 欄に `admin` と入力します。
2. **PASS** 欄に、SQLインジェクションを引き起こす魔法の文字列を入力します：
   `' OR '1'='1`
   （シングルクォート、スペース、オア、スペース、シングルクォート、イチ、イコール、シングルクォート、イチ）
3. **LOGIN** ボタンをクリックします。
4. 成功すると、画面に **"ACCESS GRANTED"** と表示され、隠されたフラグ（機密情報）が表示されます。

## 🧠 仕組みの解説（なぜログインできるのか？）

このアプリでは、入力されたパスワードを**そのままSQL文（データベースへの命令）に結合**しています。

通常、システムは以下の命令でチェックしています：
> 「パスワードが一致するなら通す」

しかし、魔法の言葉 `' OR '1'='1` を入力すると、サーバー内で命令文が以下のように変身します：

```sql
SELECT * FROM users WHERE username = 'admin' AND password = '' OR '1'='1'
```

この OR '1'='1' は **「または、1と1が同じならOK」という意味です。 「1と1が同じ」なのは常に正解（TRUE）** なので、データベースは「条件クリア！」と勘違いして、鍵を開けてしまうのです。

これが **SQLインジェクション** という攻撃手法の正体です。

## 🛠️ 使用技術

コンテストの規定に合わせ、クライアントサイド（JavaScript）だけでなく、**サーバーサイド（Hono）での処理**を実装しています。

- **Main Language:** TypeScript
- **Frontend:** HTML(Honoで生成しています), CSS (完全分離構成), JavaScript (Fetch API)
- **Backend:** Hono (v4), TypeScript
- **Database:** SQLite (better-sqlite3 / In-Memory)
- **Infrastructure:** Google Cloud Run (Docker)

## 💡 こだわりポイント

1. **サーバーサイドでの脆弱性実装**
   - クライアント側での判定ではなく、実際にサーバー内で「危険なSQL文」を組み立て、SQLiteデータベースに問い合わせる処理を実装しました。
   - `src/index.ts` にて、ユーザー入力をエスケープせずにSQL結合する挙動を確認できます。

2. **没入感のあるUIデザイン**
   - ハッキング体験を盛り上げるため、黒背景に蛍光グリーンのターミナル風デザインを採用しました。
   - CSSファイルを分離し、`serveStatic` を用いて静的配信を行っています。
   - アプリ内にも「仕組みの解説」ボタンを実装し、モーダルウィンドウで学習できるようにしました。

3. **Docker & Cloud Run 運用**
   - `Dockerfile` を作成し、コンテナ技術を用いてクラウド上にデプロイしています。
   - データベースはインメモリ（`:memory:`）で動作するため、アプリ再起動ごとにリセットされる安全な設計です。

## 📝 作者
つっちー